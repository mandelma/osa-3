{"version":3,"sources":["service/personData.js","UusiHenkilo.js","Filter.js","Persons.js","App.js","index.js"],"names":["baseUrl","personData","getAll","axios","get","then","response","data","create","newObject","post","catch","error","update","id","put","concat","delPyynto","delete","method","UusiHenkilo","props","react_default","a","createElement","onSubmit","addPerson","value","newName","onChange","nameHandler","newNumber","numberHandler","type","Filter","Persons","showPersons","Note","note","name","number","onClick","del","ErrorNotification","errMessage","className","MessageNotification","message","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","filterName","setFilter","_useState9","_useState10","setMessage","_useState11","_useState12","errorMessage","setErrorMessage","useEffect","henkiloTiedot","initialNotes","forEach","element","deletePerson","window","confirm","thisPerson","filter","i","showMessage","n","addNewContact","returnedNote","length","updateNumero","newNote","_objectSpread","find","alert","map","item","mess","setMessageStyle","setTimeout","App_ErrorNotification","App_MessageNotification","src_Filter","event","target","src_UusiHenkilo","preventDefault","onkoNimi","src_Persons","word","toLowerCase","startsWith","App_Note","key","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.0ec6744f.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons' \r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n  .catch(error => {\r\n    return error.response.data\r\n  })\r\n}\r\n\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\n\r\nconst delPyynto = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`, {\r\n    method: 'delete'\r\n  })\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, delPyynto}","import React from \"react\"\r\n\r\nconst UusiHenkilo = (props) => {\r\n    return(\r\n        <div>\r\n            <form onSubmit = {props.addPerson}>\r\n                <div>\r\n                name: <input \r\n                    value = {props.newName}  \r\n              \r\n                    onChange = {props.nameHandler}\r\n                /><br/>\r\n                number: <input\r\n                    value = {props.newNumber}\r\n              \r\n                    onChange = {props.numberHandler}\r\n                />\r\n                </div>\r\n                <div>\r\n                    <button type = \"submit\">\r\n                        add\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n} \r\n\r\nexport default UusiHenkilo","import React from \"react\"\r\n\r\nconst Filter = (props) => {\r\n    return(\r\n        <div>\r\n            filter shown with <input\r\n            onChange = {props.onChange}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Filter","import React from \"react\"\r\n\r\nconst Persons = (props) => {\r\n    return (\r\n        <div>\r\n            {props.showPersons}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Persons","import React, {useState, useEffect} from 'react'\nimport henkiloTiedot from \"./service/personData\"\nimport UusiHenkilo from \"./UusiHenkilo\"\nimport Filter from \"./Filter\"\nimport Persons from \"./Persons\"\nimport \"./index.css\"\n\nconst Note = (props) => {\n  return(\n    <div>\n      <li>\n        {props.note.name} {props.note.number}\n        <button onClick = {props.del}>Delete</button>\n      </li>\n    </div>\n  )\n}\n\nconst ErrorNotification = (props) => {\n  if(props.errMessage === null){\n    return null\n  }\n  return(\n    <div className = \"error\">\n      {props.errMessage}\n    </div>\n  )\n}\n\nconst MessageNotification = (props) => {\n  if(props.message === null){\n    return null\n  }\n  return(\n    <div className = \"message\">\n      {props.message}\n    </div>\n  ) \n}\n\nfunction App(props) {\n\n  const [persons, setPersons] = useState([])\n         \n  const [newName, setNewName] = useState(\"\")\n\n  const [newNumber, setNewNumber] = useState(\"\")\n\n  const [filterName, setFilter] = useState(\"\")\n\n  const [message, setMessage] = useState(null)\n\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    henkiloTiedot\n      .getAll()\n        .then(initialNotes => {\n          setPersons(initialNotes)\n        })\n  }, [])\n \n  const lue = () => persons.map(item =><Note\n    key = {item.id}\n    note = {item}\n    del = {() => deletePerson(item.id, item.name)}\n    />\n  )\n\n  const lueFilter = () => persons.filter(word => \n    word.name.toLowerCase().startsWith(filterName)).map(item =>\n    <Note\n      key = {item.id}\n      note = {item}\n      del = {() => deletePerson(item.id, item.name)}\n    />)\n\n  let id = 0\n  persons.forEach(element => {\n    if(element.name === newName){\n      id = element.id\n    }\n  });  \n\n  const deletePerson = (id, name) => {\n    if(window.confirm(`Delete ${name} ?`)){\n      henkiloTiedot\n      .delPyynto(id)\n      .then(thisPerson => {\n        setPersons(persons.filter(i => i.id !== id))\n        \n        showMessage(`${name} is deleted, from phonebook`, setMessage)\n        \n      })\n      .catch(error  => {\n        showMessage(`information of ${name} is already removed from server`, setErrorMessage)\n        setPersons(persons.filter(n => n.id !== id))\n      })\n    }\n  }\n\n  const onkoNimi = (value) => {\n    for(let i = 0; i < persons.length; i++){\n      if(persons[i].name === value){\n        return true\n      } \n    }\n    return false\n  }\n\n  const newContactOrUpdate = (event) => {\n    event.preventDefault()\n\n    if(onkoNimi(newName)){\n      updateNumero()\n    }\n    else{\n      addNewContact()\n    }\n    \n  }\n\n  \n\n  const addNewContact = () => {\n    const newObject = {\n      name: newName,\n      number: newNumber\n    }\n    henkiloTiedot\n      .create(newObject)\n      .then(returnedNote => {\n        setNewName(\"\")\n        setNewNumber(\"\") \n        if(newNumber.length < 8){\n          showMessage(\"Liiga lühike number\", setErrorMessage)\n          setPersons(persons.filter(n => n.name !== newName))\n        }\n        else{\n          showMessage(`${newName} is added to phonebook`, setMessage)\n          setPersons(persons.concat(returnedNote))\n        }\n        \n      })\n      .catch(error  => {\n        showMessage(`Error adding new contact`, setErrorMessage)\n        setPersons(persons.filter(n => n.name !== newName))\n      })  \n      //setNewName(\"\")\n      //setNewNumber(\"\") \n  }\n\n  \n\n  const updateNumero = () => {\n    const note = persons.find(note => note.id === id)\n    const newNote = {...note, number: newNumber}\n  \n    henkiloTiedot\n    .update(id, newNote)\n    .then(returnedNote => {\n      alert(`${newName} is already added to phonebook. Replace the old number with a new one?`)\n      setPersons(persons.map(item => item.id !== id ? item : returnedNote))\n      if(newNumber.length >= 8){\n        showMessage(\"Kontakt on muudetud\", setMessage)\n      }\n      else{\n        showMessage(\"Uus number on liiga lühike!\", setErrorMessage)\n        //setPersons(persons.filter(n => n.number.length < 8 ? n : returnedNote))\n      }\n    \n      setNewName(\"\")\n      setNewNumber(\"\")\n    })\n  \n    .catch(error  => {\n      showMessage(`information of ${newName} is already removed from server`, setErrorMessage)\n      setPersons(persons.filter(n => n.id !== id))\n      setNewName(\"\")\n      setNewNumber(\"\")\n    })\n\n  }\n\n    \n\n    \n\n   /*  if(onkoNimi(newName)){\n      alert(`${newName} is already added to phonebook. Replace the old number with a new one?`)\n      \n      \n          \n          setNewName(\"\")\n          setNewNumber(\"\")\n      \n      /* }\n      else{\n        setErrorMessage(\"Error: name or number length is nor correct.\" + \n            \"Name should be at least 3 char and number at least 8\")\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 3000)\n        setNewName(\"\")\n        setNewNumber(\"\")\n        \n      } */\n      \n    \n      //console.log(\"Nimi on \", newObject.name, \" ja number on \", newObject.number)\n      //console.log(\"Nimekirja pikkus: \", persons.length)\n      \n      \n           \n\n    \n  //} */\n\n  \n\n  const showMessage = (mess, setMessageStyle) => {\n    setMessageStyle(mess)\n    setTimeout(() => {\n      setMessageStyle(null)\n    }, 5000)\n  }\n\n  const nameHandler = (event) => {\n    setNewName(event.target.value)\n  \n  }\n\n  const numberHandler = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <ErrorNotification \n        errMessage = {errorMessage}\n        />\n      <MessageNotification \n        message = {message}\n      />\n      <br/>\n      <Filter\n        onChange = {(event) => setFilter(event.target.value)}\n      />\n      <h2>add a new</h2>\n      <UusiHenkilo \n        addPerson = {newContactOrUpdate}\n        newName = {newName}\n        newNumber = {newNumber}\n        nameHandler = {nameHandler}\n        numberHandler = {numberHandler}\n      />\n      <h2>Numbers</h2> \n      <Persons\n        showPersons =  {filterName.length > 0\n        ? lueFilter() : lue()}\n      /> \n    </div>\n  );\n}\n\nexport default App;\n\n\n/* setErrorMessage(\"Error: name or number length is nor correct.\" + \n                \"Name should be at least 3 char and number at least 8\")\n              setTimeout(() => {\n                setErrorMessage(null)\n              }, 3000)\n              setNewName(\"\")\n              setNewNumber(\"\")\n          } */","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}