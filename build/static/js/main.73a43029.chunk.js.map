{"version":3,"sources":["service/personData.js","UusiHenkilo.js","Filter.js","Persons.js","App.js","index.js"],"names":["baseUrl","personData","getAll","axios","get","then","response","data","create","newObject","post","catch","error","console","log","update","id","put","concat","delPyynto","delete","method","UusiHenkilo","props","react_default","a","createElement","onSubmit","addPerson","value","newName","onChange","nameHandler","newNumber","numberHandler","type","Filter","Persons","showPersons","Note","note","name","number","onClick","del","ErrorNotification","errMessage","className","MessageNotification","message","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","filterName","setFilter","_useState9","_useState10","setMessage","_useState11","_useState12","errorMessage","setErrorMessage","useEffect","henkiloTiedot","initialNotes","lue","map","item","App_Note","key","deletePerson","window","confirm","returned","filter","i","setTimeout","n","App_ErrorNotification","App_MessageNotification","src_Filter","event","target","src_UusiHenkilo","preventDefault","length","readOnlyError","forEach","element","onkoNimi","alert","find","newNote","objectSpread","returnedNote","src_Persons","word","toLowerCase","startsWith","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.73a43029.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons' \r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n    .catch(error => {\r\n      console.log(error.response.data)\r\n    })\r\n}\r\n\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\n\r\nconst delPyynto = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`, {\r\n    method: 'delete'\r\n  })\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, delPyynto}","import React from \"react\"\r\n\r\nconst UusiHenkilo = (props) => {\r\n    return(\r\n        <div>\r\n            <form onSubmit = {props.addPerson}>\r\n                <div>\r\n                name: <input \r\n                    value = {props.newName}  \r\n              \r\n                    onChange = {props.nameHandler}\r\n                /><br/>\r\n                number: <input\r\n                    value = {props.newNumber}\r\n              \r\n                    onChange = {props.numberHandler}\r\n                />\r\n                </div>\r\n                <div>\r\n                    <button type = \"submit\">\r\n                        add\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n} \r\n\r\nexport default UusiHenkilo","import React from \"react\"\r\n\r\nconst Filter = (props) => {\r\n    return(\r\n        <div>\r\n            filter shown with <input\r\n            onChange = {props.onChange}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Filter","import React from \"react\"\r\n\r\nconst Persons = (props) => {\r\n    return (\r\n        <div>\r\n            {props.showPersons}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Persons","import React, {useState, useEffect} from 'react'\nimport henkiloTiedot from \"./service/personData\"\n\nimport UusiHenkilo from \"./UusiHenkilo\"\nimport Filter from \"./Filter\"\nimport Persons from \"./Persons\"\n\nimport \"./index.css\"\n\nconst Note = (props) => {\n  return(\n    <div>\n      <li>\n        {props.note.name} {props.note.number}\n        <button onClick = {props.del}>Delete</button>\n      </li>\n    </div>\n  )\n}\n\nconst ErrorNotification = (props) => {\n  if(props.errMessage === null){\n    return null\n  }\n\n  return(\n    <div className = \"error\">\n      {props.errMessage}\n    </div>\n  )\n}\n\nconst MessageNotification = (props) => {\n  if(props.message === null){\n    return null\n  }\n\n  return(\n    <div className = \"message\">\n      {props.message}\n    </div>\n  ) \n}\n\nfunction App() {\n\n  \n\n\n  const [persons, setPersons] = useState([])\n         \n  const [newName, setNewName] = useState(\"\")\n\n  const [newNumber, setNewNumber] = useState(\"\")\n\n  const [filterName, setFilter] = useState(\"\")\n\n  const [message, setMessage] = useState(null)\n\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    henkiloTiedot\n      .getAll()\n        .then(initialNotes => {\n          setPersons(initialNotes)\n        })\n  }, [])\n\n  \n  const lue = () => persons.map(item => item.name\n    ? <Note\n        key = {item.name}\n        note = {item}\n        del = {() => deletePerson(item.id, item.name)}\n      />\n    : null\n  )\n\n  console.log(\"Lue tüüp on: \", typeof(lue))\n  \n  const lueFilter = () => persons.filter(word => \n    word.name.toLowerCase().startsWith(filterName)).map(item =>\n    <Note\n      key = {item.id}\n      note = {item}\n      del = {() => deletePerson(item.id, item.name)}\n    />)\n\n  const deletePerson = (id, name) => {\n    if(window.confirm(`Delete ${name} ?`)){\n      //const personId = persons.find(note => note.id === id)\n      \n      henkiloTiedot\n      .delPyynto(id)\n      .then(returned => {\n        setPersons(persons.filter(i => i.id !== id))\n        console.log(\"Id on \" + id)\n        if(errorMessage === null){\n          setMessage(\n            `${name} is deleted, from phonebook`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 3000)\n        }\n      })\n\n      .catch(error  => {\n        setErrorMessage(\n          `info of ${name} is already removed from server`\n        )\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 3000)\n        setPersons(persons.filter(n => n.id !== id))\n      })\n    }\n  }\n\n  const onkoNimi = (value) => {\n    for(let i = 0; i < persons.length; i++){\n      if(persons[i].name === value){\n        return true\n      } \n    }\n    return false\n  }\n\n  \n  const addPerson = (event) => {\n    event.preventDefault()\n    const newObject = {}\n    if(newName.length > 3){\n      newObject = {\n        name: newName,\n        number: newNumber\n      }\n    }\n    \n\n    let id = 0\n    persons.forEach(element => {\n      if(element.name === newName){\n        id = element.id\n      }\n    });\n\n    if(onkoNimi(newName)){\n      alert(`${newName} is already added to phonebook. Replace the old number with a new one?`)\n\n      const note = persons.find(note => note.id === id)\n      const newNote = {...note, number: newNumber}\n      \n      henkiloTiedot\n        .update(id, newNote)\n        .then(returnedNote => {\n          setPersons(persons.map(item => item.id !== id ? item : returnedNote))\n\n        if(errorMessage === null){\n            setMessage(\n              `${newName} new number is set`\n            )\n            setTimeout(() => {\n              setMessage(null)\n            }, 3000)\n          }\n          setNewName(\"\")\n          setNewNumber(\"\")\n          })\n          .catch(error  => {\n            setErrorMessage(\n              `information of ${newName} is already removed from server`\n            )\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 3000)\n            setPersons(persons.filter(n => n.id !== id))\n          })  \n          setNewName(\"\")\n          setNewNumber(\"\")\n          \n    }else{\n      henkiloTiedot\n        .create(newObject)\n          .then(returnedNote => {\n            setPersons(persons.concat(returnedNote))\n            setNewNumber(\"\")\n            if(errorMessage === null){\n              setMessage(\n                `${newName} is added to phonebook`\n              )\n              setTimeout(() => {\n                setMessage(null)\n              }, 5000)\n            }\n\n            setNewName(\"\")\n            setNewNumber(\"\")\n          })\n          .catch(error => {\n            setPersons(persons.filter(n => n.id !== id))\n            setErrorMessage(\"Nimi on lühem kui lubatud!!!\")\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 3000)\n            \n          })    \n    }\n  }\n\n  const nameHandler = (event) => {\n    setNewName(event.target.value)\n  \n  }\n\n  const numberHandler = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <ErrorNotification \n        errMessage = {errorMessage}\n        />\n      <MessageNotification \n        message = {message}\n      />\n      <br/>\n      <Filter\n        onChange = {(event) => setFilter(event.target.value)}\n\n      />\n      <h2>add a new</h2>\n      <UusiHenkilo \n        addPerson = {addPerson}\n        newName = {newName}\n        newNumber = {newNumber}\n        nameHandler = {nameHandler}\n        numberHandler = {numberHandler}\n      />\n      <h2>Numbers</h2> \n      <Persons\n        showPersons =  {filterName.length > 0\n        ? lueFilter() : lue()}\n      /> \n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}